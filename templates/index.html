<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <link rel="icon" type="image/png" sizes="32x32" href="../static/favicon-32x32.ico">
        <link rel="icon" type="image/png" sizes="16x16" href="../static/favicon-16x16.ico">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="theme-color" content="#ffffff">

        <link rel="stylesheet" type="text/css" href="../static/css/paper.css">
        <script src="https://cdn.staticfile.org/jquery/3.4.0/jquery.min.js"></script>
        <script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
        <script src="https://cdn.bootcss.com/toastr.js/latest/js/toastr.min.js"></script>
        <link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/toastr.js/latest/css/toastr.min.css">

        <script>
            var host = "http://47.101.33.252:4869"
        </script>

        <title>quizåœ¨çº¿ç­”é¢˜ç³»ç»Ÿ</title>
    </head>
    <body>
        <div class="container paper">
            <nav class="border split-nav">
                <div class="nav-brand">
                    <h3>
                        <p class="text-primary">ğŸ“šåœ¨çº¿
                            <span class="text-secondary">ç­”é¢˜</span>
                        </p>
                    </h3>
                </div>
                <div class="collapsible">
                    <div class="collapsible-body">
                        <ul class="inline">
                            <li>æƒ³è¦åœ¨ç–«æƒ…å®…å®¶æœŸé—´å­¦ä¹ æ•°æ®åº“çŸ¥è¯†ã€æå‡ä»£ç èƒ½åŠ›ï¼Ÿ</li><br/>
                            <li>è¿™æ˜¯ä½ ä¸å®¹é”™è¿‡çš„å­¦ä¹ å¹³å°å“¦ï¼</li>
                        </ul>
                    </div>
                </div>
            </nav>
            <h3>ğŸ“Œç®€ä»‹ - Brief Introduction</h3>
            <p class="text-primary">
                Hiï¼ä½ ç»ˆäºæ¥å•¦ï¼æˆ‘ä»¬ä¸ºä½ å‡†å¤‡äº†ä¸€ä¸ªç®€å•çš„åœ¨çº¿ç­”é¢˜ç³»ç»Ÿï¼Œåœ¨è¿™é‡Œï¼Œä½ æ—¢å¯ä»¥é€šè¿‡é€‰æ‹©é€Ÿç­”å¢é•¿å…³äºæ•°æ®åº“çš„çŸ¥è¯†ï¼Œä¹Ÿå¯ä»¥è¯•è¯•æˆ‘ä»¬çš„acmç®—æ³•æŒ‘æˆ˜ï¼Œé”»ç‚¼ä»£ç èƒ½åŠ›ã€‚æˆ‘ä»¬çš„æ’è¡Œæ¦œç­‰ä½ æ¥åˆ·æ–°ï¼<br/>
            </p>
            <h3>ğŸš€è®©æˆ‘ä»¬å¼€å§‹å§ - Let's Start</h3>
            è´¦æˆ·é‚®ç®±: <input type="text" id="name" name="name" value="" style="width: 300px"> <br>
            è´¦æˆ·å¯†ç : <input type="password" id="password" name="password" value="" style="width: 300px"> <br>
            <button id="login">ç™»&ensp;å½•âš¡</button>
            <button id="signUp">æ³¨&ensp;å†ŒğŸ“¨</button>
            <script>
                $("#login").click(function () {
                    var name = $("#name")
                    var passwd = $("#password")
                    var accountName = name.val()
                    var password = passwd.val()
                    if (!accountName || accountName == "") {
                        showMsg("è¯·è¾“å…¥ç”¨æˆ·å");
                        name.focus();
                    } else if (!password || password == "") {
                        showMsg("è¯·è¾“å…¥å¯†ç ");
                        passwd.focus();
                    } else {
                        //è¿™é‡Œä¸ºç”¨ajaxè·å–ç”¨æˆ·ä¿¡æ¯å¹¶è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœè´¦æˆ·å¯†ç ä¸åŒ¹é…åˆ™ç™»å½•å¤±è´¥ï¼Œå¦‚ä¸éœ€è¦éªŒè¯ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™æ®µå¯ä¸å†™
                        $.ajax({
                            url: host + "/auth/login",// è·å–è‡ªå·±ç³»ç»Ÿåå°ç”¨æˆ·ä¿¡æ¯æ¥å£
                            contentType: "application/json; charset=UTF-8",
                            data: JSON.stringify({
                                email: accountName,
                                password: password,
                            }),
                            type: "POST",
                            dataType: "json",
                            success: function (data, status, request) {
                                console.log(data)
                                if (data) {
                                    if (data.status === 10000) { //åˆ¤æ–­è¿”å›å€¼ï¼Œè¿™é‡Œæ ¹æ®çš„ä¸šåŠ¡å†…å®¹å¯åšè°ƒæ•´
                                        var author = request.getResponseHeader("Authorization")
                                        $.cookie("author", author)
                                        toastr.success("æ­£åœ¨ç™»å½•ä¸­...");
                                        setTimeout(function () {//åšå»¶æ—¶ä»¥ä¾¿æ˜¾ç¤ºç™»å½•çŠ¶æ€å€¼\
                                            window.location.href = "rank.html";//æŒ‡å‘ç™»å½•çš„é¡µé¢åœ°å€
                                        }, 1000)
                                    } else {
                                        toastr.warning(data.msg);//æ˜¾ç¤ºç™»å½•å¤±è´¥çš„åŸå› 
                                        return false;
                                    }
                                }
                            },
                            error: function (data) {
                                console.log(data.message);
                            }
                        })
                    }
                })

                //é”™è¯¯ä¿¡æ¯æé†’
                function showMsg(msg) {
                    $("#CheckMsg").text(msg);
                }

                document.onkeydown = keyDownSearch;

                function keyDownSearch(e) {
                    // å…¼å®¹FFå’ŒIEå’ŒOpera
                    var theEvent = e || window.event;
                    var code = theEvent.keyCode || theEvent.which || theEvent.charCode;
                    if (code == 13) {
                        $('#submit').click();//å…·ä½“å¤„ç†å‡½æ•°
                        return false;
                    }
                    return true;
                }

                $("#signUp").click(function () {
                    window.location.href = "signup.html"
                })
            </script>
        </div>
    </body>
</html>
